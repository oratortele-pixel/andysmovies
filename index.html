<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>Andy's Movies</title>
  <meta name="description" content="Classic movies by Andy: trailers, posters, and the best films.">

  <!-- Favicon -->
  <link rel="icon" href="favicon.svg" type="image/svg+xml">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css"/>

  <!-- Open Graph (Telegram) -->
  <meta property="og:title" content="Andy's Movies">
  <meta property="og:description" content="Classic movies by Andy: trailers, posters, and the best films.">
  <meta property="og:image" content="https://oratortele-pixel.github.io/andysmovies/assets/og/og-banner-1200x630.jpg?v=4">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://oratortele-pixel.github.io/andysmovies/">
</head>
<body>
  <!-- Header (logo + centered search) -->
  <header class="site-header">
    <img src="assets/og/logo.png" alt="Andy's Movies" class="logo-img">
    <input type="search" id="search-input" class="search-bar"
           placeholder="Search for a movie..." autocomplete="off">
  </header>

  <!-- Decade filters -->
  <div class="decade-filters">
    <button data-decade="all" class="active">All</button>
    <button data-decade="1970">1970s</button>
    <button data-decade="1980">1980s</button>
    <button data-decade="1990">1990s</button>
    <button data-decade="2000">2000s</button>
    <button data-decade="2010">2010s</button>
    <button data-decade="2020">2020s</button>
  </div>

  <!-- Catalog -->
  <div id="catalog" class="catalog"></div>

  <!-- Modal (big) -->
  <div id="modal" class="modal" hidden>
    <div class="modal-content">
      <button id="close" class="close" aria-label="Close">&times;</button>

      <h2 id="modal-title"></h2>
      <p id="modal-year"></p>
      <p id="modal-notes"></p>

      <h3>Quotes</h3>
      <ul id="modal-quotes"></ul>

      <h3>Links</h3>
      <ul id="modal-links"></ul>

      <!-- Trailer button -->
      <button id="trailer-btn" class="btn trailer-btn" hidden>Watch trailer</button>

      <!-- Trailer player -->
      <div id="trailer-wrap" class="trailer-wrap" hidden>
        <iframe
          id="trailer-frame"
          src=""
          title="Trailer"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="script.js"></script>

  <!-- Tiny addon: privacy trailer + stop on close -->
  <script>
    (function () {
      const trailerBtn   = document.getElementById('trailer-btn');
      const trailerWrap  = document.getElementById('trailer-wrap');
      const trailerFrame = document.getElementById('trailer-frame');
      const closeBtn     = document.getElementById('close');

      if (trailerBtn) {
        trailerBtn.addEventListener('click', () => {
          const yt = trailerBtn.dataset.yt;         // ожидаем ID YouTube в data-yt
          if (!yt) return;
          trailerFrame.src = 'https://www.youtube-nocookie.com/embed/' + yt + '?autoplay=1';
          trailerFrame.setAttribute('loading','lazy');
          trailerFrame.setAttribute('referrerpolicy','strict-origin-when-cross-origin');
          trailerWrap.hidden = false;
        });
      }

      if (closeBtn) {
        closeBtn.addEventListener('click', () => {
          trailerFrame.src = '';                    // стоп видео
          trailerWrap.hidden = true;
        });
      }
    }());
  </script>
</body>
</html>
